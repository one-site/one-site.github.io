import{b as c,m as s,f,p as v,s as j,a as w,g as q}from"./vendor.060c2f12.js";const E=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(t){if(t.ep)return;t.ep=!0;const l=r(t);fetch(t.href,l)}};E();function $(o,e=0){let r=e;return Array.isArray(o)?o.length:(Object.values(o).forEach(n=>{console.log("not an array, recurse",n);let t=$(n);r+=t,console.log("after recurse",e,t)}),r)}const L=()=>{let o=c({height:"100%",width:"100%","overflow-y":"auto"}).class,e=c({display:"grid","grid-template-columns":"1fr 1fr 1fr 1fr"}).class;c({"grid-column":"1 / -1","background-color":"lightgrey"}),document.body.classList.add(o);let r=1;return{_view:()=>s("div","Grouped"),view:({attrs:{nestedData:n}})=>(console.log("Grouped::view",n),s(`div.${e}`,Object.keys(n).map((t,l)=>{let u=c({"background-color":"lightgrey","grid-area":`${r}/1/${r+1}/-1`,position:"sticky",top:0,left:0});r++;let O=Object.keys(n[t]).flatMap(h=>{let m=n[t][h];return console.log("day",h,m),console.log(`${r}/1/${r+1}/-1`),m.map((g,M)=>{console.log("mtfunc",$(m));let p=c({"font-size":"0.85em","grid-row":`${r}/${r+1}`});return r++,[!(M>0)&&s(`div.${p}`,{style:"grid-column:1/2"},f(g.date,"EEE, do")),s(`div.${p}`,{style:"grid-column:2/3"},g.series),s(`div.${p}`,{style:"grid-column:3/5"},g.track)]})});return[s(`div.${u}`,f(v(t),"MMMM YYY"))].concat(O)})))}};console.log("Hello world from App.js");function b(o,e){if(!e.length)return o;var r=e[0],n=e.slice(1);return w(q(o,r),function(t){return b(t,n)})}let d=[],a={background:!0},i="https://one-site.github.io",y={};Promise.all([s.request(`${i}/data/ertm.json`,a),s.request(`${i}/data/mrs.json`,a),s.request(`${i}/data/mvshofs.json`,a),s.request(`${i}/data/nwmt.json`,a),s.request(`${i}/data/nyirp.json`,a),s.request(`${i}/data/opnm.json`,a).then(o=>o.map(e=>Object.assign(e,{series:"OPNM"}))),s.request(`${i}/data/roc.json`,a).then(o=>o.map(e=>Object.assign(e,{series:"ROC"}))),s.request(`${i}/data/ttom.json`,a).then(o=>o.map(e=>Object.assign(e,{series:"TTOM"})))]).then(o=>{console.log("promise all: ",o),d=o.flatMap(e=>e),d.reduce((e,r,n)=>(r.date=v(r.date),r.id=n,e),d),d=d.sort((e,r)=>e.date-r.date),y=b(d.map(e=>(e.m=f(j(e.date),"yyyy-MM-dd"),e.dt=f(e.date,"dd-MMM-yyyy"),e)),["m","dt"]),s.redraw()});s.mount(document.body,{view:()=>(console.log("allEvents",d,y),s(L,{nestedData:y}))});window.DEBUG={m:s};
